(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[346],{188:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var a=r(5155),s=r(2115),n=r(5511),d=r(6695),i=r(3873),o=r(283),l=r(172),c=r(960),u=r(5317),f=r(7039),m=r(9340),h=r(3013),p=r(6126),g=r(6874),x=r.n(g);function v(){let[e,t]=(0,s.useState)(new Date),[r,g]=(0,s.useState)([]),[v,y]=(0,s.useState)(!0),{weddingSession:b,loadingSession:w}=(0,i.i)(),{user:N}=(0,o.A)();(0,s.useEffect)(()=>{if(!b||!N)return;y(!0);let e=(0,u.P)((0,u.rJ)(f.db,"tasks"),(0,u._M)("weddingId","==",b.id),(0,u.My)("deadline","asc")),t=(0,u.aQ)(e,e=>{g(e.docs.map(e=>({id:e.id,...e.data()}))),y(!1)},e=>{console.error("Error fetching tasks:",e),y(!1)});return()=>t()},[b,N]);let j=(0,s.useMemo)(()=>e?r.filter(t=>(0,m.r)(t.deadline.toDate(),e)):[],[e,r]),_=(0,s.useMemo)(()=>r.map(e=>e.deadline.toDate()),[r]);return w?(0,a.jsx)("div",{className:"flex justify-center items-center h-full",children:(0,a.jsx)(l.A,{className:"h-12 w-12 animate-spin text-primary"})}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("h1",{className:"text-3xl font-headline text-primary",children:"Wedding Calendar"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)(d.Zp,{className:"lg:col-span-2 shadow-lg",children:(0,a.jsx)(d.Wu,{className:"p-2 sm:p-4 flex justify-center",children:(0,a.jsx)(n.V,{mode:"single",selected:e,onSelect:t,className:"rounded-md",modifiers:{highlighted:_},modifiersStyles:{highlighted:{border:"2px solid hsl(var(--primary))",borderRadius:"var(--radius)"}}})})}),(0,a.jsxs)(d.Zp,{className:"shadow-lg",children:[(0,a.jsx)(d.aR,{children:(0,a.jsxs)(d.ZB,{className:"font-headline text-xl text-primary",children:["Tasks for ",e?(0,h.GP)(e,"MMMM do, yyyy"):"selected date"]})}),(0,a.jsx)(d.Wu,{className:"max-h-[300px] overflow-y-auto",children:v?(0,a.jsx)("div",{className:"flex justify-center items-center py-8",children:(0,a.jsx)(l.A,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):j.length>0?(0,a.jsx)("ul",{className:"space-y-3",children:j.map(e=>(0,a.jsxs)("li",{className:"p-3 bg-secondary/20 rounded-md shadow-sm hover:shadow-md transition-shadow",children:[(0,a.jsx)("h3",{className:"font-semibold text-sm",children:e.title}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-1",children:[(0,a.jsx)(p.E,{variant:"completed"===e.status?"default":"secondary",className:"capitalize text-xs",children:e.status}),(0,a.jsx)(x(),{href:"/checklist?task=".concat(e.id),className:"text-xs text-primary hover:underline",children:"View Details"})]})]},e.id))}):(0,a.jsxs)("div",{className:"text-center py-8 text-muted-foreground",children:[(0,a.jsx)(c.A,{className:"h-10 w-10 mx-auto mb-2 opacity-50"}),"No tasks due on this day."]})})]})]})]})}},283:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>l});var a=r(5155),s=r(2115),n=r(7039),d=r(3004),i=r(5317);let o=(0,s.createContext)(void 0),l=e=>{let{children:t}=e,[r,l]=(0,s.useState)(null),[c,u]=(0,s.useState)(!0),[f,m]=(0,s.useState)(!1);return(0,s.useEffect)(()=>{let e,t=(0,d.hg)(n.j2,t=>{if(e&&(e(),e=void 0),t&&n.db){let r=(0,i.H9)(n.db,"users",t.uid);u(!0),e=(0,i.aQ)(r,e=>{e.exists()?l(e.data()):(console.warn("Firestore user profile for UID ".concat(t.uid," not found. Using minimal profile from Auth.")),l({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,activeWeddingId:null})),u(!1),m(!1)},e=>{console.error("Error listening to user document:",e),l(null),u(!1),m(!1)})}else l(null),u(!1),m(!1)});return()=>{t(),e&&e()}},[]),(0,a.jsx)(o.Provider,{value:{user:r,loading:c,isAuthenticating:f,setIsAuthenticating:m},children:t})},c=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},285:(e,t,r)=>{"use strict";r.d(t,{$:()=>l,r:()=>o});var a=r(5155),s=r(2115),n=r(9708),d=r(2085),i=r(9434);let o=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=s.forwardRef((e,t)=>{let{className:r,variant:s,size:d,asChild:l=!1,...c}=e,u=l?n.DX:"button";return(0,a.jsx)(u,{className:(0,i.cn)(o({variant:s,size:d,className:r})),ref:t,...c})});l.displayName="Button"},960:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(157).A)("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]])},3873:(e,t,r)=>{"use strict";r.d(t,{W:()=>l,i:()=>c});var a=r(5155),s=r(2115),n=r(283),d=r(5317),i=r(7039);let o=(0,s.createContext)(void 0),l=e=>{let{children:t}=e,{user:r,loading:l}=(0,n.A)(),[c,u]=(0,s.useState)(null),[f,m]=(0,s.useState)(!0);return(0,s.useEffect)(()=>{let e;if(l)return void m(!0);if((null==r?void 0:r.activeWeddingId)&&i.db){m(!0);let t=(0,d.H9)(i.db,"weddings",r.activeWeddingId);e=(0,d.aQ)(t,e=>{e.exists()?u({id:e.id,...e.data()}):(u(null),console.warn("Firestore_WeddingContext: Active wedding session ".concat(r.activeWeddingId," not found."))),m(!1)},e=>{console.error("Firestore_WeddingContext: Error listening to wedding session:",e),u(null),m(!1)})}else u(null),m(!1);return()=>{e&&e()}},[r,l]),(0,a.jsx)(o.Provider,{value:{weddingSession:c,setWeddingSession:u,loadingSession:f},children:t})},c=()=>{let e=(0,s.useContext)(o);if(void 0===e)throw Error("useWedding must be used within a WeddingProvider");return e}},5511:(e,t,r)=>{"use strict";r.d(t,{V:()=>l});var a=r(5155);r(2115);var s=r(965),n=r(3158),d=r(8049),i=r(9434),o=r(285);function l(e){let{className:t,classNames:r,showOutsideDays:l=!0,...c}=e;return(0,a.jsx)(d.hv,{showOutsideDays:l,className:(0,i.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,o.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,i.cn)((0,o.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...r},components:{IconLeft:e=>{let{className:t,...r}=e;return(0,a.jsx)(s.A,{className:(0,i.cn)("h-4 w-4",t),...r})},IconRight:e=>{let{className:t,...r}=e;return(0,a.jsx)(n.A,{className:(0,i.cn)("h-4 w-4",t),...r})}},...c})}l.displayName="Calendar"},6126:(e,t,r)=>{"use strict";r.d(t,{E:()=>i});var a=r(5155);r(2115);var s=r(2085),n=r(9434);let d=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(d({variant:r}),t),...s})}},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>l,Wu:()=>c,ZB:()=>o,Zp:()=>d,aR:()=>i,wL:()=>u});var a=r(5155),s=r(2115),n=r(9434);let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});d.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});o.displayName="CardTitle";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});l.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},7039:(e,t,r)=>{"use strict";r.d(t,{db:()=>m,j2:()=>f});var a=r(3915),s=r(3004),n=r(5317),d=r(858);let i={apiKey:"AIzaSyBjVh31ibQbBGpC5MRwCExHnl9FJMwjIqQ",authDomain:"togetherplan.firebaseapp.com",projectId:"togetherplan",storageBucket:"togetherplan.firebasestorage.app",messagingSenderId:"1000835742597",appId:"1:1000835742597:web:66b8a4d6a53bd68a6722ec",measurementId:r(9509).env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},o={apiKey:"API_KEY",authDomain:"AUTH_DOMAIN",projectId:"PROJECT_ID",storageBucket:"STORAGE_BUCKET",messagingSenderId:"MESSAGING_SENDER_ID",appId:"APP_ID",measurementId:"MEASUREMENT_ID"},l=!0,c=[];for(let e of["apiKey","authDomain","projectId"])if(!i[e]){let t=o[e]||String(e).toUpperCase(),r="NEXT_PUBLIC_FIREBASE_".concat(t);c.push(r)}c.length>0&&(console.error("Firebase config error: The following environment variables are not defined. Please set them in your .env file:\n"+c.map(e=>"- ".concat(e)).join("\n")+"\n\nAfter updating .env, you may need to restart your Next.js development server for the changes to take effect."),l=!1);let u=l&&!(0,a.Dk)().length?(0,a.Wp)(i):(0,a.Dk)().length?(0,a.Sx)():null,f=u?(0,s.xI)(u):null,m=u?(0,n.aU)(u):null;u&&(0,d.c7)(u)},7620:(e,t,r)=>{Promise.resolve().then(r.bind(r,188))},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(2596),s=r(9688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,644,391,352,143,178,441,684,358],()=>t(7620)),_N_E=e.O()}]);