(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[536],{283:(e,t,r)=>{"use strict";r.d(t,{A:()=>c,AuthProvider:()=>o});var s=r(5155),a=r(2115),n=r(7039),l=r(3004),i=r(5317);let d=(0,a.createContext)(void 0),o=e=>{let{children:t}=e,[r,o]=(0,a.useState)(null),[c,u]=(0,a.useState)(!0),[h,m]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{let e,t=(0,l.hg)(n.j2,t=>{if(e&&(e(),e=void 0),t&&n.db){let r=(0,i.H9)(n.db,"users",t.uid);u(!0),e=(0,i.aQ)(r,e=>{e.exists()?o(e.data()):(console.warn("Firestore user profile for UID ".concat(t.uid," not found. Using minimal profile from Auth.")),o({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,activeWeddingId:null})),u(!1),m(!1)},e=>{console.error("Error listening to user document:",e),o(null),u(!1),m(!1)})}else o(null),u(!1),m(!1)});return()=>{t(),e&&e()}},[]),(0,s.jsx)(d.Provider,{value:{user:r,loading:c,isAuthenticating:h,setIsAuthenticating:m},children:t})},c=()=>{let e=(0,a.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},285:(e,t,r)=>{"use strict";r.d(t,{$:()=>o,r:()=>d});var s=r(5155),a=r(2115),n=r(9708),l=r(2085),i=r(9434);let d=(0,l.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=a.forwardRef((e,t)=>{let{className:r,variant:a,size:l,asChild:o=!1,...c}=e,u=o?n.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(d({variant:a,size:l,className:r})),ref:t,...c})});o.displayName="Button"},644:(e,t,r)=>{"use strict";r.d(t,{o:()=>a});var s=r(5476);function a(e){let t=(0,s.a)(e);return t.setHours(0,0,0,0),t}},960:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(157).A)("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]])},3873:(e,t,r)=>{"use strict";r.d(t,{W:()=>o,i:()=>c});var s=r(5155),a=r(2115),n=r(283),l=r(5317),i=r(7039);let d=(0,a.createContext)(void 0),o=e=>{let{children:t}=e,{user:r,loading:o}=(0,n.A)(),[c,u]=(0,a.useState)(null),[h,m]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e;if(o)return void m(!0);if((null==r?void 0:r.activeWeddingId)&&i.db){m(!0);let t=(0,l.H9)(i.db,"weddings",r.activeWeddingId);e=(0,l.aQ)(t,e=>{e.exists()?u({id:e.id,...e.data()}):(u(null),console.warn("Firestore_WeddingContext: Active wedding session ".concat(r.activeWeddingId," not found."))),m(!1)},e=>{console.error("Firestore_WeddingContext: Error listening to wedding session:",e),u(null),m(!1)})}else u(null),m(!1);return()=>{e&&e()}},[r,o]),(0,s.jsx)(d.Provider,{value:{weddingSession:c,setWeddingSession:u,loadingSession:h},children:t})},c=()=>{let e=(0,a.useContext)(d);if(void 0===e)throw Error("useWedding must be used within a WeddingProvider");return e}},5476:(e,t,r)=>{"use strict";function s(e){let t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):new Date("number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?e:NaN)}r.d(t,{a:()=>s})},6264:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>N});var s=r(5155),a=r(3873),n=r(2115),l=r(5476),i=r(6695);let d=e=>{let t=new Date;if(e<=t)return null;let r=function(e,t,r){var s;return(s=void 0,e=>{let t=(s?Math[s]:Math.trunc)(e);return 0===t?0:t})(((0,l.a)(e)-(0,l.a)(t))/1e3)}(e,t),s=Math.floor(r/86400),a=Math.floor((r-=86400*s)/3600),n=Math.floor((r-=3600*a)/60),i=r-=60*n;return{days:s,hours:a,minutes:n,seconds:i}};function o(e){let{weddingDate:t}=e,[r,a]=(0,n.useState)(d(t));if((0,n.useEffect)(()=>{if(t<=new Date)return void a(null);let e=setInterval(()=>{a(d(t))},1e3);return()=>clearInterval(e)},[t]),!r)return(0,s.jsxs)(i.Zp,{className:"shadow-lg",children:[(0,s.jsx)(i.aR,{children:(0,s.jsx)(i.ZB,{className:"text-center font-headline text-2xl text-primary",children:"The Big Day is Here (or Past)!"})}),(0,s.jsx)(i.Wu,{className:"text-center",children:(0,s.jsx)("p",{className:"text-lg",children:"Congratulations!"})})]});let l=e=>{let{value:t,label:r}=e;return(0,s.jsxs)("div",{className:"flex flex-col items-center p-2 sm:p-4 bg-primary/10 rounded-lg shadow-inner min-w-[60px] sm:min-w-[80px]",children:[(0,s.jsx)("span",{className:"text-2xl sm:text-4xl font-bold text-primary",children:t.toString().padStart(2,"0")}),(0,s.jsx)("span",{className:"text-xs sm:text-sm text-primary/80 uppercase",children:r})]})};return(0,s.jsxs)(i.Zp,{className:"shadow-lg w-full",children:[(0,s.jsx)(i.aR,{children:(0,s.jsx)(i.ZB,{className:"text-center font-headline text-2xl sm:text-3xl text-primary",children:'Counting Down to "I Do!"'})}),(0,s.jsx)(i.Wu,{children:(0,s.jsxs)("div",{className:"flex justify-around items-center space-x-2 sm:space-x-4",children:[(0,s.jsx)(l,{value:r.days,label:"Days"}),(0,s.jsx)(l,{value:r.hours,label:"Hours"}),(0,s.jsx)(l,{value:r.minutes,label:"Mins"}),(0,s.jsx)(l,{value:r.seconds,label:"Secs"})]})})]})}var c=r(285),u=r(172),h=r(960),m=r(8328),x=r(8271);let p=(0,r(157).A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var f=r(6874),g=r.n(f),v=r(283),j=r(5317),y=r(7039),b=r(9340);function N(){let{weddingSession:e,loadingSession:t}=(0,a.i)(),{user:r}=(0,v.A)(),[l,d]=(0,n.useState)([]),[f,N]=(0,n.useState)(!0);(0,n.useEffect)(()=>{if(!e||!r)return;N(!0);let t=(0,j.P)((0,j.rJ)(y.db,"tasks"),(0,j._M)("weddingId","==",e.id),(0,j.My)("deadline","asc")),s=(0,j.aQ)(t,e=>{d(e.docs.map(e=>({id:e.id,...e.data()}))),N(!1)},e=>{console.error("Error fetching tasks for dashboard:",e),N(!1)});return()=>s()},[e,r]);let w=(0,n.useMemo)(()=>{let e=l.length;return{total:e,completed:l.filter(e=>"completed"===e.status).length,overdue:l.filter(e=>"completed"!==e.status&&e.deadline.toDate()<new Date&&!(0,b.r)(e.deadline.toDate(),new Date)).length}},[l]),k=(0,n.useMemo)(()=>{let e=new Date;return l.filter(t=>(0,b.r)(t.deadline.toDate(),e)&&"completed"!==t.status)},[l]);if(t)return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center h-full",children:[(0,s.jsx)(u.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,s.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading Dashboard..."})]});if(!e)return(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-xl",children:"No wedding session found."}),(0,s.jsx)(g(),{href:"/welcome",children:(0,s.jsx)(c.$,{className:"mt-4",children:"Setup Your Wedding"})})]});let A=e.weddingDate.toDate();return(0,s.jsxs)("div",{className:"space-y-6 sm:space-y-8",children:[(0,s.jsx)(o,{weddingDate:A}),(0,s.jsxs)(i.Zp,{children:[(0,s.jsx)(i.aR,{children:(0,s.jsx)(i.ZB,{className:"font-headline text-xl text-primary",children:"Quick Links"})}),(0,s.jsx)(i.Wu,{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:[{label:"Checklist",href:"/checklist",icon:h.A},{label:"Calendar",href:"/calendar",icon:m.A},{label:"Settings",href:"/settings",icon:x.A}].map(e=>(0,s.jsx)(c.$,{variant:"outline",asChild:!0,className:"h-20 sm:h-24 flex-col gap-1 text-center shadow-md hover:shadow-lg transition-shadow border-2 border-transparent hover:border-primary/30",children:(0,s.jsxs)(g(),{href:e.href,children:[(0,s.jsx)(e.icon,{className:"h-6 w-6 sm:h-8 sm:w-8 mb-1"}),(0,s.jsx)("span",{className:"text-xs sm:text-sm",children:e.label})]})},e.label))})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 sm:gap-8",children:[(0,s.jsxs)(i.Zp,{children:[(0,s.jsx)(i.aR,{children:(0,s.jsx)(i.ZB,{className:"font-headline text-xl text-primary",children:"Task Overview"})}),(0,s.jsx)(i.Wu,{className:"space-y-2",children:f?(0,s.jsx)("div",{className:"flex justify-center items-center py-4",children:(0,s.jsx)(u.A,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("p",{children:["Total Tasks: ",(0,s.jsx)("span",{className:"font-semibold",children:w.total})]}),(0,s.jsxs)("p",{children:["Completed: ",(0,s.jsx)("span",{className:"font-semibold text-green-600",children:w.completed})]}),w.overdue>0&&(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)(p,{className:"h-4 w-4 mr-1 text-red-600"}),"Overdue: ",(0,s.jsx)("span",{className:"font-semibold text-red-600 ml-1",children:w.overdue})]}),(0,s.jsx)(g(),{href:"/checklist",children:(0,s.jsx)(c.$,{variant:"link",className:"px-0 pt-2",children:"View all tasks"})})]})})]}),(0,s.jsxs)(i.Zp,{children:[(0,s.jsx)(i.aR,{children:(0,s.jsx)(i.ZB,{className:"font-headline text-xl text-primary",children:"Today's Focus"})}),(0,s.jsxs)(i.Wu,{children:[f?(0,s.jsx)("div",{className:"flex justify-center items-center py-4",children:(0,s.jsx)(u.A,{className:"h-6 w-6 animate-spin text-muted-foreground"})}):k.length>0?(0,s.jsx)("ul",{className:"space-y-2",children:k.map(e=>(0,s.jsx)("li",{className:"text-sm p-2 bg-secondary/30 rounded-md shadow-sm",children:(0,s.jsx)(g(),{href:"/checklist?task=".concat(e.id),className:"hover:underline",children:e.title})},e.id))}):(0,s.jsx)("p",{className:"text-muted-foreground",children:"No tasks due today. Relax!"}),(0,s.jsx)(g(),{href:"/checklist?filter=today",children:(0,s.jsx)(c.$,{variant:"link",className:"px-0 mt-2",children:"View today's tasks"})})]})]})]}),(0,s.jsxs)(i.Zp,{className:"mt-8",children:[(0,s.jsx)(i.aR,{children:(0,s.jsx)(i.ZB,{className:"font-headline text-xl text-primary",children:"Meet Your Partner in Planning!"})}),(0,s.jsx)(i.Wu,{className:"text-center",children:e.partnerIds.length<2&&e.shareCode?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"mb-4",children:"Share this code with your partner so they can join the wedding plan:"}),(0,s.jsx)("p",{className:"text-2xl font-bold tracking-widest bg-accent/30 text-accent-foreground p-3 rounded-md inline-block",children:e.shareCode})]}):(0,s.jsx)("p",{children:"You and your partner are all set up!"})})]})]})}},6695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>o,Wu:()=>c,ZB:()=>d,Zp:()=>l,aR:()=>i,wL:()=>u});var s=r(5155),a=r(2115),n=r(9434);let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});l.displayName="Card";let i=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});i.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});d.displayName="CardTitle";let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});o.displayName="CardDescription";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});c.displayName="CardContent";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})});u.displayName="CardFooter"},7039:(e,t,r)=>{"use strict";r.d(t,{db:()=>m,j2:()=>h});var s=r(3915),a=r(3004),n=r(5317),l=r(858);let i={apiKey:"AIzaSyBjVh31ibQbBGpC5MRwCExHnl9FJMwjIqQ",authDomain:"togetherplan.firebaseapp.com",projectId:"togetherplan",storageBucket:"togetherplan.firebasestorage.app",messagingSenderId:"1000835742597",appId:"1:1000835742597:web:66b8a4d6a53bd68a6722ec",measurementId:r(9509).env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID},d={apiKey:"API_KEY",authDomain:"AUTH_DOMAIN",projectId:"PROJECT_ID",storageBucket:"STORAGE_BUCKET",messagingSenderId:"MESSAGING_SENDER_ID",appId:"APP_ID",measurementId:"MEASUREMENT_ID"},o=!0,c=[];for(let e of["apiKey","authDomain","projectId"])if(!i[e]){let t=d[e]||String(e).toUpperCase(),r="NEXT_PUBLIC_FIREBASE_".concat(t);c.push(r)}c.length>0&&(console.error("Firebase config error: The following environment variables are not defined. Please set them in your .env file:\n"+c.map(e=>"- ".concat(e)).join("\n")+"\n\nAfter updating .env, you may need to restart your Next.js development server for the changes to take effect."),o=!1);let u=o&&!(0,s.Dk)().length?(0,s.Wp)(i):(0,s.Dk)().length?(0,s.Sx)():null,h=u?(0,a.xI)(u):null,m=u?(0,n.aU)(u):null;u&&(0,l.c7)(u)},8271:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(157).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8328:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(157).A)("CalendarDays",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]])},9280:(e,t,r)=>{Promise.resolve().then(r.bind(r,6264))},9340:(e,t,r)=>{"use strict";r.d(t,{r:()=>a});var s=r(644);function a(e,t){return+(0,s.o)(e)==+(0,s.o)(t)}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var s=r(2596),a=r(9688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,644,391,352,143,441,684,358],()=>t(9280)),_N_E=e.O()}]);