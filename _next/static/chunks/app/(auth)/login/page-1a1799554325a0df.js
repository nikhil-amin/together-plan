(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[72],{439:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>N});var t=s(5155),r=s(221),i=s(2177),n=s(5594),l=s(285),d=s(7759),c=s(2523),u=s(6631),o=s(283),m=s(5695),x=s(7481),h=s(172);let p=n.Ik({email:n.Yj().email({message:"Invalid email address."}),password:n.Yj().min(6,{message:"Password must be at least 6 characters."})});function j(){let{setIsAuthenticating:e,isAuthenticating:a}=(0,o.A)();(0,m.useRouter)();let{toast:s}=(0,x.dj)(),n=(0,i.mN)({resolver:(0,r.u)(p),defaultValues:{email:"",password:""}});async function j(a){e(!0);try{await (0,u.Ru)(a.email,a.password)}catch(a){s({variant:"destructive",title:"Login failed",description:a.message||"Invalid email or password. Please try again."}),e(!1)}}return(0,t.jsx)(d.lV,{...n,children:(0,t.jsxs)("form",{onSubmit:n.handleSubmit(j),className:"space-y-6",children:[(0,t.jsx)(d.zB,{control:n.control,name:"email",render:e=>{let{field:a}=e;return(0,t.jsxs)(d.eI,{children:[(0,t.jsx)(d.lR,{children:"Email"}),(0,t.jsx)(d.MJ,{children:(0,t.jsx)(c.p,{placeholder:"you@example.com",...a,type:"email"})}),(0,t.jsx)(d.C5,{})]})}}),(0,t.jsx)(d.zB,{control:n.control,name:"password",render:e=>{let{field:a}=e;return(0,t.jsxs)(d.eI,{children:[(0,t.jsx)(d.lR,{children:"Password"}),(0,t.jsx)(d.MJ,{children:(0,t.jsx)(c.p,{placeholder:"••••••••",...a,type:"password"})}),(0,t.jsx)(d.C5,{})]})}}),(0,t.jsxs)(l.$,{type:"submit",className:"w-full",disabled:a,children:[a&&(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Log In"]})]})})}var f=s(2391),w=s(6695),y=s(6874),g=s.n(y),v=s(2115);function N(){let{user:e,loading:a}=(0,o.A)(),s=(0,m.useRouter)();return((0,v.useEffect)(()=>{!a&&e&&s.replace("/")},[e,a,s]),a||e)?(0,t.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-center p-4 bg-gradient-to-br from-primary/10 via-background to-accent/10",children:[(0,t.jsx)(h.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,t.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]}):(0,t.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center p-4 bg-gradient-to-br from-primary/10 via-background to-accent/10",children:(0,t.jsxs)(w.Zp,{className:"w-full max-w-md shadow-xl",children:[(0,t.jsxs)(w.aR,{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-4xl font-headline text-primary",children:"TogetherPlan"}),(0,t.jsx)(w.ZB,{className:"text-2xl font-semibold",children:"Welcome Back!"}),(0,t.jsx)(w.BT,{children:"Log in to continue planning your big day."})]}),(0,t.jsxs)(w.Wu,{className:"space-y-6",children:[(0,t.jsx)(j,{}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("span",{className:"w-full border-t"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,t.jsx)("span",{className:"bg-card px-2 text-muted-foreground",children:"Or continue with"})})]}),(0,t.jsx)(f._,{}),(0,t.jsxs)("p",{className:"text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",(0,t.jsx)(g(),{href:"/signup",className:"font-medium text-primary hover:underline",children:"Sign Up"})]})]})]})})}},2391:(e,a,s)=>{"use strict";s.d(a,{_:()=>u});var t=s(5155),r=s(285),i=s(6631),n=s(283),l=s(5695),d=s(7481);let c=(0,s(157).A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);function u(){let{setIsAuthenticating:e}=(0,n.A)();(0,l.useRouter)();let{toast:a}=(0,d.dj)(),s=async()=>{e(!0);try{await (0,i.G6)()}catch(s){a({variant:"destructive",title:"Sign-in failed",description:s.message||"Could not sign in with Google. Please try again."}),e(!1)}};return(0,t.jsxs)(r.$,{variant:"outline",className:"w-full",onClick:s,children:[(0,t.jsx)(c,{className:"mr-2 h-4 w-4"})," Sign in with Google"]})}},3655:(e,a,s)=>{"use strict";s.d(a,{hO:()=>d,sG:()=>l});var t=s(2115),r=s(7650),i=s(9708),n=s(5155),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,a)=>{let s=t.forwardRef((e,s)=>{let{asChild:t,...r}=e,l=t?i.DX:a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(l,{...r,ref:s})});return s.displayName=`Primitive.${a}`,{...e,[a]:s}},{});function d(e,a){e&&r.flushSync(()=>e.dispatchEvent(a))}},4810:(e,a,s)=>{Promise.resolve().then(s.bind(s,439))},5695:(e,a,s)=>{"use strict";var t=s(8999);s.o(t,"usePathname")&&s.d(a,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}})},6631:(e,a,s)=>{"use strict";s.d(a,{CI:()=>u,G6:()=>c,Ru:()=>d,VM:()=>m,bk:()=>l,eg:()=>o});var t=s(3004),r=s(7039),i=s(5317);let n=new t.HF,l=async(e,a,s)=>{let n=(await (0,t.eJ)(r.j2,e,a)).user;await (0,t.r7)(n,{displayName:s});let l={uid:n.uid,email:n.email,displayName:s,photoURL:n.photoURL,activeWeddingId:null};return await (0,i.BN)((0,i.H9)(r.db,"users",n.uid),l),l},d=async(e,a)=>{let s=await (0,t.x9)(r.j2,e,a);return(await (0,i.x7)((0,i.H9)(r.db,"users",s.user.uid))).data()},c=async()=>{let e=(await (0,t.df)(r.j2,n)).user,a=(0,i.H9)(r.db,"users",e.uid),s=await (0,i.x7)(a);if(!s.exists()){let s={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,activeWeddingId:null};return await (0,i.BN)(a,s),s}return s.data()},u=async()=>{await (0,t.CI)(r.j2)},o=async(e,a)=>{let s=(0,i.H9)(r.db,"users",e);return await (0,i.mZ)(s,a),(await (0,i.x7)(s)).data()},m=async e=>{let a=(0,i.H9)(r.db,"users",e),s=await (0,i.x7)(a);return s.exists()?s.data():null}}},e=>{var a=a=>e(e.s=a);e.O(0,[992,644,391,352,143,521,825,441,684,358],()=>a(4810)),_N_E=e.O()}]);