(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{2391:(e,a,s)=>{"use strict";s.d(a,{_:()=>u});var t=s(5155),r=s(285),i=s(6631),l=s(283),n=s(5695),d=s(7481);let c=(0,s(157).A)("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);function u(){let{setIsAuthenticating:e}=(0,l.A)();(0,n.useRouter)();let{toast:a}=(0,d.dj)(),s=async()=>{e(!0);try{await (0,i.G6)()}catch(s){a({variant:"destructive",title:"Sign-in failed",description:s.message||"Could not sign in with Google. Please try again."}),e(!1)}};return(0,t.jsxs)(r.$,{variant:"outline",className:"w-full",onClick:s,children:[(0,t.jsx)(c,{className:"mr-2 h-4 w-4"})," Sign in with Google"]})}},3655:(e,a,s)=>{"use strict";s.d(a,{hO:()=>d,sG:()=>n});var t=s(2115),r=s(7650),i=s(9708),l=s(5155),n=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"].reduce((e,a)=>{let s=t.forwardRef((e,s)=>{let{asChild:t,...r}=e,n=t?i.DX:a;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,l.jsx)(n,{...r,ref:s})});return s.displayName=`Primitive.${a}`,{...e,[a]:s}},{});function d(e,a){e&&r.flushSync(()=>e.dispatchEvent(a))}},5219:(e,a,s)=>{Promise.resolve().then(s.bind(s,9301))},5695:(e,a,s)=>{"use strict";var t=s(8999);s.o(t,"usePathname")&&s.d(a,{usePathname:function(){return t.usePathname}}),s.o(t,"useRouter")&&s.d(a,{useRouter:function(){return t.useRouter}})},6631:(e,a,s)=>{"use strict";s.d(a,{CI:()=>u,G6:()=>c,Ru:()=>d,VM:()=>m,bk:()=>n,eg:()=>o});var t=s(3004),r=s(7039),i=s(5317);let l=new t.HF,n=async(e,a,s)=>{let l=(await (0,t.eJ)(r.j2,e,a)).user;await (0,t.r7)(l,{displayName:s});let n={uid:l.uid,email:l.email,displayName:s,photoURL:l.photoURL,activeWeddingId:null};return await (0,i.BN)((0,i.H9)(r.db,"users",l.uid),n),n},d=async(e,a)=>{let s=await (0,t.x9)(r.j2,e,a);return(await (0,i.x7)((0,i.H9)(r.db,"users",s.user.uid))).data()},c=async()=>{let e=(await (0,t.df)(r.j2,l)).user,a=(0,i.H9)(r.db,"users",e.uid),s=await (0,i.x7)(a);if(!s.exists()){let s={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,activeWeddingId:null};return await (0,i.BN)(a,s),s}return s.data()},u=async()=>{await (0,t.CI)(r.j2)},o=async(e,a)=>{let s=(0,i.H9)(r.db,"users",e);return await (0,i.mZ)(s,a),(await (0,i.x7)(s)).data()},m=async e=>{let a=(0,i.H9)(r.db,"users",e),s=await (0,i.x7)(a);return s.exists()?s.data():null}},9301:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>v});var t=s(5155),r=s(221),i=s(2177),l=s(5594),n=s(285),d=s(7759),c=s(2523),u=s(6631),o=s(283),m=s(5695),x=s(7481),h=s(172);let p=l.Ik({displayName:l.Yj().min(2,{message:"Name must be at least 2 characters."}),email:l.Yj().email({message:"Invalid email address."}),password:l.Yj().min(6,{message:"Password must be at least 6 characters."})});function j(){let{setIsAuthenticating:e,isAuthenticating:a}=(0,o.A)();(0,m.useRouter)();let{toast:s}=(0,x.dj)(),l=(0,i.mN)({resolver:(0,r.u)(p),defaultValues:{displayName:"",email:"",password:""}});async function j(a){e(!0);try{await (0,u.bk)(a.email,a.password,a.displayName)}catch(a){s({variant:"destructive",title:"Sign up failed",description:a.message||"Could not create account. Please try again."}),e(!1)}}return(0,t.jsx)(d.lV,{...l,children:(0,t.jsxs)("form",{onSubmit:l.handleSubmit(j),className:"space-y-6",children:[(0,t.jsx)(d.zB,{control:l.control,name:"displayName",render:e=>{let{field:a}=e;return(0,t.jsxs)(d.eI,{children:[(0,t.jsx)(d.lR,{children:"Full Name"}),(0,t.jsx)(d.MJ,{children:(0,t.jsx)(c.p,{placeholder:"Your Name",...a})}),(0,t.jsx)(d.C5,{})]})}}),(0,t.jsx)(d.zB,{control:l.control,name:"email",render:e=>{let{field:a}=e;return(0,t.jsxs)(d.eI,{children:[(0,t.jsx)(d.lR,{children:"Email"}),(0,t.jsx)(d.MJ,{children:(0,t.jsx)(c.p,{placeholder:"you@example.com",...a,type:"email"})}),(0,t.jsx)(d.C5,{})]})}}),(0,t.jsx)(d.zB,{control:l.control,name:"password",render:e=>{let{field:a}=e;return(0,t.jsxs)(d.eI,{children:[(0,t.jsx)(d.lR,{children:"Password"}),(0,t.jsx)(d.MJ,{children:(0,t.jsx)(c.p,{placeholder:"••••••••",...a,type:"password"})}),(0,t.jsx)(d.C5,{})]})}}),(0,t.jsxs)(n.$,{type:"submit",className:"w-full",disabled:a,children:[a&&(0,t.jsx)(h.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Account"]})]})})}var f=s(2391),y=s(6695),w=s(6874),g=s.n(w),N=s(2115);function v(){let{user:e,loading:a}=(0,o.A)(),s=(0,m.useRouter)();return((0,N.useEffect)(()=>{!a&&e&&s.replace("/")},[e,a,s]),a||e)?(0,t.jsxs)("div",{className:"flex min-h-screen flex-col items-center justify-center p-4 bg-gradient-to-br from-primary/10 via-background to-accent/10",children:[(0,t.jsx)(h.A,{className:"h-12 w-12 animate-spin text-primary"}),(0,t.jsx)("p",{className:"mt-4 text-muted-foreground",children:"Loading..."})]}):(0,t.jsx)("div",{className:"flex min-h-screen flex-col items-center justify-center p-4 bg-gradient-to-br from-primary/10 via-background to-accent/10",children:(0,t.jsxs)(y.Zp,{className:"w-full max-w-md shadow-xl",children:[(0,t.jsxs)(y.aR,{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-4xl font-headline text-primary",children:"TogetherPlan"}),(0,t.jsx)(y.ZB,{className:"text-2xl font-semibold",children:"Create Your Account"}),(0,t.jsx)(y.BT,{children:"Join TogetherPlan and start planning your dream wedding."})]}),(0,t.jsxs)(y.Wu,{className:"space-y-6",children:[(0,t.jsx)(j,{}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("span",{className:"w-full border-t"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-xs uppercase",children:(0,t.jsx)("span",{className:"bg-card px-2 text-muted-foreground",children:"Or sign up with"})})]}),(0,t.jsx)(f._,{}),(0,t.jsxs)("p",{className:"text-center text-sm text-muted-foreground",children:["Already have an account?"," ",(0,t.jsx)(g(),{href:"/login",className:"font-medium text-primary hover:underline",children:"Log In"})]})]})]})})}}},e=>{var a=a=>e(e.s=a);e.O(0,[992,644,391,352,143,521,825,441,684,358],()=>a(5219)),_N_E=e.O()}]);